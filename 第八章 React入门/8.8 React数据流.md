## 8.8 React数据流
> 在React中，数据是自顶向下单向流动的，从父组件到子组件。这条原则让组件之间的关系变的可以预测。



state和props是组件中最重要的概念，如果顶层组件初始化props，那么React会向下遍历整个组件树，重新尝试渲染所有相关的子组件。state 只关心每个组件自己内部的状态，这些状态只能在组件内变化。把组件看成一个函数，那么它接收了 props 作为参数，内部由 state 作为函数的内部参数，返回一个 Virtual DOM 的实现。

**state**
**
state 是组件内部状态，修改 state 的值修改需要通过 `setState` 方法，禁止直接修改 state， `setState` 是一个异步方法，修改完成会有一个回调方法，一个生命周期内所有 `setState` 方法会合并统一操作。
不推荐过多的使用 state，当数据更新同时需要更新界面的时候，才使用 state，并且尽量将 state 推到系统边缘，统一管理 state。过多的内部状态会让数据流混乱，程序变得难以维护。

**props**
**
props 是 properties 缩写，是 React 用来让组件之间相互联系的一种机制。
React 的单向数据流，主要的流动管道就是 props，props 本身是不可变的。
注意：父组件传递的 props，作为子组件的 state，会产生引用对象影响问题，也就是赋值是一个浅复制，会导致 state 改变进而导致 父组件的 props 改变。

**prop 和 state 的对比**
**

- prop 用于定义外部接口，state用于纪录内部状态；
- prop 的赋值在外部使用组件时，state 的赋值在组件内部；
- 组件不应该改变 prop 的值，而 state 存在的目的就是让组件来改变。